# Fed_MPC_Web 生产部署检查清单

## 📋 部署前准备

### ✅ 服务器准备
- [ ] **服务器规格确认**
  - [ ] CPU: 至少2核心
  - [ ] RAM: 至少4GB
  - [ ] 存储: 至少20GB可用空间
  - [ ] 网络: 公网IP，开放80、443端口
  
- [ ] **操作系统环境**
  - [ ] Ubuntu 20.04+ / CentOS 8+ / RHEL 8+
  - [ ] 系统更新到最新
  - [ ] 时区设置正确
  - [ ] 防火墙配置完成

- [ ] **必需软件安装**
  - [ ] Docker Engine
  - [ ] Docker Compose
  - [ ] Git
  - [ ] Curl/Wget

### ✅ 域名和SSL证书
- [ ] **域名配置**
  - [ ] 域名指向服务器IP
  - [ ] www子域名设置（可选）
  - [ ] DNS传播完成

- [ ] **SSL证书**
  - [ ] 证书获取（Let's Encrypt或商业证书）
  - [ ] 证书文件权限设置
  - [ ] 自动续期配置

### ✅ 环境配置
- [ ] **环境变量设置**
  - [ ] `.env`文件创建并配置
  - [ ] SECRET_KEY生成（强随机密钥）
  - [ ] JWT_SECRET_KEY设置
  - [ ] 数据库密码设置
  - [ ] CORS_ORIGINS配置

- [ ] **安全配置**
  - [ ] 数据库root密码强度检查
  - [ ] 应用密钥复杂度验证
  - [ ] 敏感信息环境变量化

## 🚀 部署执行

### ✅ 代码部署
- [ ] **源代码**
  - [ ] Git仓库克隆到服务器
  - [ ] 代码版本确认
  - [ ] 文件权限设置正确

- [ ] **配置文件**
  - [ ] 环境配置文件(.env)就位
  - [ ] Docker配置文件检查
  - [ ] Nginx配置文件检查

### ✅ 服务启动
- [ ] **Docker服务**
  - [ ] `docker-compose build`成功
  - [ ] `docker-compose up -d`启动成功
  - [ ] 所有容器状态healthy

- [ ] **数据库初始化**
  - [ ] MySQL容器启动成功
  - [ ] 数据库连接测试通过
  - [ ] 数据表创建完成
  - [ ] 初始数据导入（如需要）

## 🔍 部署验证

### ✅ 基础功能测试
- [ ] **健康检查**
  - [ ] `GET /api/health` 返回200
  - [ ] 数据库连接状态正常
  - [ ] 系统资源状态良好

- [ ] **API接口测试**
  - [ ] 认证接口正常 (`POST /api/auth/login`)
  - [ ] AI模块接口响应 (`GET /api/ai/*)
  - [ ] 区块链模块接口响应 (`GET /api/blockchain/*)
  - [ ] 密码学模块接口响应 (`GET /api/crypto/*)

### ✅ 前端访问测试
- [ ] **页面加载**
  - [ ] 首页正常访问
  - [ ] AI模块页面加载
  - [ ] 区块链模块页面加载  
  - [ ] 密码学模块页面加载

- [ ] **功能测试**
  - [ ] 用户登录流程正常
  - [ ] 页面跳转正常
  - [ ] API调用成功
  - [ ] 数据显示正确

### ✅ 性能和安全测试
- [ ] **性能测试**
  - [ ] 页面加载时间<3秒
  - [ ] API响应时间<1秒
  - [ ] 并发访问测试通过
  - [ ] 内存使用率正常

- [ ] **安全测试**
  - [ ] HTTPS访问正常
  - [ ] 安全头设置验证
  - [ ] 输入验证测试
  - [ ] 权限控制验证

## 🔧 服务配置

### ✅ 监控系统
- [ ] **日志系统**
  - [ ] 应用日志正常输出
  - [ ] 错误日志记录正确
  - [ ] 日志轮转配置
  - [ ] 日志存储路径正确

- [ ] **监控指标**
  - [ ] Prometheus指标收集
  - [ ] 系统指标监控
  - [ ] 应用指标监控
  - [ ] 告警规则配置

### ✅ 备份系统
- [ ] **备份配置**
  - [ ] 数据库备份脚本测试
  - [ ] 备份存储路径设置
  - [ ] 备份保留策略配置
  - [ ] 自动备份计划设置

- [ ] **恢复测试**
  - [ ] 备份文件完整性验证
  - [ ] 数据恢复流程测试
  - [ ] 恢复时间评估

## 🚨 运维配置

### ✅ 自动化脚本
- [ ] **部署脚本**
  - [ ] 自动部署脚本测试
  - [ ] 回滚机制验证
  - [ ] 零停机更新配置

- [ ] **维护脚本**
  - [ ] 日志清理脚本
  - [ ] 数据库维护脚本
  - [ ] 系统清理脚本

### ✅ 定时任务
- [ ] **Cron任务**
  - [ ] 数据库备份定时任务
  - [ ] 日志清理定时任务
  - [ ] 系统监控任务
  - [ ] SSL证书续期任务

## 📊 上线检查

### ✅ 最终验证
- [ ] **完整流程测试**
  - [ ] 端到端功能测试
  - [ ] 多用户并发测试
  - [ ] 异常情况处理测试
  - [ ] 数据一致性验证

- [ ] **文档和培训**
  - [ ] 操作手册完善
  - [ ] 监控指标说明
  - [ ] 故障处理流程
  - [ ] 运维人员培训

### ✅ 上线准备
- [ ] **通知和沟通**
  - [ ] 用户上线通知
  - [ ] 技术团队通知
  - [ ] 监控人员就位
  - [ ] 应急响应准备

- [ ] **切换流程**
  - [ ] DNS切换计划
  - [ ] 流量迁移策略
  - [ ] 回滚预案准备
  - [ ] 上线时间安排

## ✅ 上线后监控

### 第1小时
- [ ] 所有服务状态正常
- [ ] CPU、内存使用率稳定
- [ ] 错误日志数量正常
- [ ] 用户访问正常

### 第1天
- [ ] 24小时稳定运行
- [ ] 备份任务正常执行
- [ ] 监控指标稳定
- [ ] 用户反馈收集

### 第1周
- [ ] 性能指标符合预期
- [ ] 安全事件监控
- [ ] 系统优化调整
- [ ] 运维流程完善

---

## 🚨 紧急联系信息

**技术负责人**: [姓名] - [电话] - [邮箱]
**运维负责人**: [姓名] - [电话] - [邮箱]
**服务器提供商**: [联系方式]
**域名服务商**: [联系方式]

## 📚 相关文档链接

- [部署指南](./README.md)
- [配置文件说明](./production_config.py)
- [监控系统说明](../backend/shared/utils/monitoring.py)
- [日志系统说明](../backend/shared/utils/logging_config.py)
- [备份恢复指南](./backup_restore.sh)

---

**检查完成日期**: _______________
**检查人员**: _______________
**审核人员**: _______________