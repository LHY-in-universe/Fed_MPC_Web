<!DOCTYPE html>
<html lang="zh-CN" data-i18n-title="ai.dashboard.client.title">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®¢æˆ·ç«¯æ§åˆ¶å°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="../../shared/css/theme-system.css">
</head>
<body class="module-background">
    <!-- Navigation -->
    <nav class="navbar">
        <div class="max-w-4xl mx-auto flex items-center justify-between">
            <div class="navbar-brand">
                <span data-i18n="ai.dashboard.client.title">å®¢æˆ·ç«¯æ§åˆ¶é¢æ¿</span>
            </div>
            
            <div class="navbar-nav">
                <span id="userInfo" class="text-sm text-gray-600"></span>
                <button class="theme-toggle" title="åˆ‡æ¢ä¸»é¢˜">
                    <span>ğŸŒ™</span>
                </button>
                <button class="language-toggle" title="åˆ‡æ¢è¯­è¨€">EN</button>
                <button onclick="logout()" class="btn btn-secondary text-sm">
                    <span data-i18n="common.logout">é€€å‡ºç™»å½•</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-4xl mx-auto px-6 py-8">
        <!-- Welcome Section -->
        <div class="text-center mb-12">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">
                <span data-i18n="ai.dashboard.client.welcome">æ¬¢è¿å›æ¥ï¼</span>
            </h2>
            <p class="text-gray-600" data-i18n="ai.dashboard.client.selectMode">é€‰æ‹©æ‚¨æƒ³è¦è¿›è¡Œçš„è®­ç»ƒæ¨¡å¼</p>
        </div>

        <!-- Training Options -->
        <div class="grid md:grid-cols-2 gap-8 mb-8">
            <!-- Local Training -->
            <div class="card cursor-pointer transition-all duration-300 hover:scale-105" onclick="selectTrainingMode('local')">
                <div class="text-center">
                    <div class="w-16 h-16 bg-gray-600 rounded-xl flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3" data-i18n="ai.dashboard.client.localTraining">æœ¬åœ°æ¨¡å‹è®­ç»ƒ</h3>
                    <p class="text-gray-600 mb-6" data-i18n="ai.dashboard.client.localDesc">ä½¿ç”¨æœ¬åœ°æ•°æ®ç‹¬ç«‹è®­ç»ƒæ¨¡å‹ï¼Œä¿æŠ¤æ•°æ®éšç§</p>
                    
                    <div class="bg-gray-50 rounded-lg p-4 mb-6">
                        <div class="text-sm text-gray-700 space-y-2">
                            <div class="flex items-center justify-between">
                                <span data-i18n="ai.dashboard.client.dataSecurity">æ•°æ®å®‰å…¨æ€§ï¼š</span>
                                <span class="font-medium text-gray-600" data-i18n="ai.dashboard.client.localStorage">æœ¬åœ°å­˜å‚¨</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span data-i18n="ai.dashboard.client.trainingSpeed">è®­ç»ƒé€Ÿåº¦ï¼š</span>
                                <span class="font-medium text-gray-600" data-i18n="ai.dashboard.client.fast">å¿«é€Ÿ</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span data-i18n="ai.dashboard.client.modelEffect">æ¨¡å‹æ•ˆæœï¼š</span>
                                <span class="font-medium text-gray-600" data-i18n="ai.dashboard.client.limitedByLocal">å—é™äºæœ¬åœ°æ•°æ®</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-gray-700 font-semibold">
                        <span data-i18n="ai.dashboard.client.startLocal">å¼€å§‹æœ¬åœ°è®­ç»ƒ</span> â†’
                    </div>
                </div>
            </div>

            <!-- Federated Training -->
            <div class="card cursor-pointer transition-all duration-300 hover:scale-105" onclick="selectTrainingMode('federated')">
                <div class="text-center">
                    <div class="w-16 h-16 bg-gray-600 rounded-xl flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3" data-i18n="ai.dashboard.client.federatedTraining">è”é‚¦å­¦ä¹ è®­ç»ƒ</h3>
                    <p class="text-gray-600 mb-6" data-i18n="ai.dashboard.client.federatedDesc">å‚ä¸åˆ†å¸ƒå¼è”é‚¦å­¦ä¹ ï¼Œè·å¾—æ›´å¥½çš„æ¨¡å‹æ•ˆæœ</p>
                    
                    <div class="bg-gray-50 rounded-lg p-4 mb-6">
                        <div class="text-sm text-gray-700 space-y-2">
                            <div class="flex items-center justify-between">
                                <span data-i18n="ai.dashboard.client.dataSecurity">æ•°æ®å®‰å…¨æ€§ï¼š</span>
                                <span class="font-medium text-gray-600" data-i18n="ai.dashboard.client.privacyProtected">éšç§ä¿æŠ¤</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span data-i18n="ai.dashboard.client.trainingSpeed">è®­ç»ƒé€Ÿåº¦ï¼š</span>
                                <span class="font-medium text-gray-600" data-i18n="ai.dashboard.client.moderate">é€‚ä¸­</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span data-i18n="ai.dashboard.client.modelEffect">æ¨¡å‹æ•ˆæœï¼š</span>
                                <span class="font-medium text-gray-600" data-i18n="ai.dashboard.client.excellent">ä¼˜ç§€</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-gray-700 font-semibold">
                        <span data-i18n="ai.dashboard.client.startFederated">å¼€å§‹è”é‚¦è®­ç»ƒ</span> â†’
                    </div>
                </div>
            </div>
        </div>

        <!-- Status Overview -->
        <div class="card mb-8">
            <h3 class="text-lg font-semibold text-gray-900 mb-6" data-i18n="ai.dashboard.client.status">è®­ç»ƒçŠ¶æ€æ¦‚è§ˆ</h3>
            <div class="grid md:grid-cols-3 gap-6">
                <div class="text-center cursor-pointer hover:bg-gray-50 p-3 rounded-lg transition-colors" onclick="viewCompletedTraining()">
                    <div class="text-2xl font-bold text-gray-700">3</div>
                    <div class="text-sm text-gray-500" data-i18n="ai.dashboard.client.completedTraining">å·²å®Œæˆè®­ç»ƒ</div>
                    <div class="text-xs text-blue-600 mt-1">ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</div>
                </div>
                <div class="text-center cursor-pointer hover:bg-gray-50 p-3 rounded-lg transition-colors" onclick="viewOngoingTraining()">
                    <div class="text-2xl font-bold text-gray-700">1</div>
                    <div class="text-sm text-gray-500" data-i18n="ai.dashboard.client.ongoingTraining">è¿›è¡Œä¸­è®­ç»ƒ</div>
                    <div class="text-xs text-blue-600 mt-1">ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</div>
                </div>
                <div class="text-center cursor-pointer hover:bg-gray-50 p-3 rounded-lg transition-colors" onclick="viewAccuracyStats()">
                    <div class="text-2xl font-bold text-gray-700">92.5%</div>
                    <div class="text-sm text-gray-500" data-i18n="ai.dashboard.client.averageAccuracy">å¹³å‡å‡†ç¡®ç‡</div>
                    <div class="text-xs text-blue-600 mt-1">ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</div>
                </div>
            </div>
        </div>

        <!-- Recent Training History -->
        <div class="card">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-lg font-semibold text-gray-900" data-i18n="ai.dashboard.client.recentHistory">æœ€è¿‘è®­ç»ƒè®°å½•</h3>
                <button class="text-blue-600 hover:text-blue-800 text-sm font-medium" onclick="viewAllTrainingHistory()">
                    æŸ¥çœ‹å…¨éƒ¨ â†’
                </button>
            </div>
            <div class="space-y-4">
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors" onclick="viewTrainingDetail('img_classify_001')">
                    <div>
                        <div class="font-medium text-gray-900" data-i18n="ai.dashboard.client.imageClassification">å›¾åƒåˆ†ç±»æ¨¡å‹</div>
                        <div class="text-sm text-gray-500">2024-01-15 14:30</div>
                    </div>
                    <div class="text-right">
                        <div class="text-sm font-medium text-gray-700">å‡†ç¡®ç‡: 94.2%</div>
                        <div class="text-xs text-gray-500" data-i18n="ai.dashboard.client.localTraining">æœ¬åœ°è®­ç»ƒ</div>
                        <div class="text-xs text-blue-600 mt-1">ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</div>
                    </div>
                </div>
                
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors" onclick="viewTrainingDetail('text_classify_002')">
                    <div>
                        <div class="font-medium text-gray-900" data-i18n="ai.dashboard.client.textClassification">æ–‡æœ¬åˆ†ç±»æ¨¡å‹</div>
                        <div class="text-sm text-gray-500">2024-01-14 10:15</div>
                    </div>
                    <div class="text-right">
                        <div class="text-sm font-medium text-gray-700">å‡†ç¡®ç‡: 91.8%</div>
                        <div class="text-xs text-gray-500" data-i18n="ai.dashboard.client.federatedTraining">è”é‚¦è®­ç»ƒ</div>
                        <div class="text-xs text-blue-600 mt-1">ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</div>
                    </div>
                </div>
                
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors" onclick="viewTrainingDetail('regression_003')">
                    <div>
                        <div class="font-medium text-gray-900" data-i18n="ai.dashboard.client.regressionModel">å›å½’é¢„æµ‹æ¨¡å‹</div>
                        <div class="text-sm text-gray-500">2024-01-13 16:45</div>
                    </div>
                    <div class="text-right">
                        <div class="text-sm font-medium text-gray-700">RMSE: 0.023</div>
                        <div class="text-xs text-gray-500" data-i18n="ai.dashboard.client.localTraining">æœ¬åœ°è®­ç»ƒ</div>
                        <div class="text-xs text-blue-600 mt-1">ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- è¿”å›ä¸»é¡µæŒ‰é’® -->
    <button class="homepage-return-btn" onclick="goHome()" title="è¿”å›ä¸»é¡µ">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
        </svg>
    </button>

    <script src="../../shared/js/theme-manager.js"></script>
    <script src="../../shared/js/i18n-manager.js"></script>
    <script>
        function selectTrainingMode(mode) {
            if (mode === 'local') {
                window.location.href = './local-training.html';
            } else if (mode === 'federated') {
                window.location.href = './federated-training-select.html';
            }
        }

        function logout() {
            localStorage.removeItem('token');
            localStorage.removeItem('user');
            localStorage.removeItem('loginTime');
            window.location.href = './login.html';
        }

        function goHome() {
            window.location.href = '../../homepage/index.html';
        }

        // è®­ç»ƒçŠ¶æ€æ¦‚è§ˆè¯¦ç»†ä¿¡æ¯
        function viewCompletedTraining() {
            alert('å·²å®Œæˆè®­ç»ƒè¯¦æƒ…\n\nå…±å®Œæˆ 3 ä¸ªè®­ç»ƒä»»åŠ¡ï¼š\nâ€¢ å›¾åƒåˆ†ç±»æ¨¡å‹ (å‡†ç¡®ç‡: 94.2%)\nâ€¢ æ–‡æœ¬åˆ†ç±»æ¨¡å‹ (å‡†ç¡®ç‡: 91.8%)\nâ€¢ å›å½’é¢„æµ‹æ¨¡å‹ (RMSE: 0.023)\n\nå¹³å‡è®­ç»ƒæ—¶é—´: 2.5å°æ—¶\næˆåŠŸç‡: 100%');
        }

        function viewOngoingTraining() {
            alert('è¿›è¡Œä¸­è®­ç»ƒè¯¦æƒ…\n\nå½“å‰æ­£åœ¨è®­ç»ƒï¼š\nâ€¢ æ·±åº¦å­¦ä¹ å›¾åƒè¯†åˆ«æ¨¡å‹\n\nè¿›åº¦: 65%\né¢„è®¡å‰©ä½™æ—¶é—´: 1.2å°æ—¶\nå½“å‰å‡†ç¡®ç‡: 89.3%\n\nè®­ç»ƒå‚æ•°ï¼š\n- å­¦ä¹ ç‡: 0.001\n- æ‰¹æ¬¡å¤§å°: 32\n- å½“å‰è½®æ¬¡: 65/100');
        }

        function viewAccuracyStats() {
            alert('å‡†ç¡®ç‡ç»Ÿè®¡è¯¦æƒ…\n\næ•´ä½“ç»Ÿè®¡ï¼š\nâ€¢ å¹³å‡å‡†ç¡®ç‡: 92.5%\nâ€¢ æœ€é«˜å‡†ç¡®ç‡: 94.2% (å›¾åƒåˆ†ç±»)\nâ€¢ æœ€ä½å‡†ç¡®ç‡: 91.8% (æ–‡æœ¬åˆ†ç±»)\n\næŒ‰è®­ç»ƒç±»å‹ï¼š\nâ€¢ æœ¬åœ°è®­ç»ƒå¹³å‡: 93.1%\nâ€¢ è”é‚¦è®­ç»ƒå¹³å‡: 91.8%\n\nè¶‹åŠ¿ï¼šç›¸æ¯”ä¸Šæœˆæå‡ 2.3%');
        }

        // è®­ç»ƒè¯¦ç»†ä¿¡æ¯
        function viewTrainingDetail(trainingId) {
            const trainingDetails = {
                'img_classify_001': {
                    name: 'å›¾åƒåˆ†ç±»æ¨¡å‹',
                    type: 'æœ¬åœ°è®­ç»ƒ',
                    accuracy: '94.2%',
                    date: '2024-01-15 14:30',
                    duration: '2.5å°æ—¶',
                    dataset: 'CIFAR-10',
                    epochs: '100',
                    loss: '0.15',
                    parameters: '1.2M'
                },
                'text_classify_002': {
                    name: 'æ–‡æœ¬åˆ†ç±»æ¨¡å‹', 
                    type: 'è”é‚¦è®­ç»ƒ',
                    accuracy: '91.8%',
                    date: '2024-01-14 10:15',
                    duration: '3.2å°æ—¶',
                    dataset: 'IMDbè¯„è®º',
                    epochs: '80',
                    loss: '0.22',
                    parameters: '850K'
                },
                'regression_003': {
                    name: 'å›å½’é¢„æµ‹æ¨¡å‹',
                    type: 'æœ¬åœ°è®­ç»ƒ', 
                    accuracy: 'RMSE: 0.023',
                    date: '2024-01-13 16:45',
                    duration: '1.8å°æ—¶',
                    dataset: 'æˆ¿ä»·æ•°æ®',
                    epochs: '120',
                    loss: '0.031',
                    parameters: '450K'
                }
            };

            const detail = trainingDetails[trainingId];
            if (detail) {
                alert(`${detail.name} è¯¦ç»†ä¿¡æ¯\n\n` +
                    `è®­ç»ƒç±»å‹: ${detail.type}\n` +
                    `å‡†ç¡®ç‡/è¯¯å·®: ${detail.accuracy}\n` +
                    `è®­ç»ƒæ—¶é—´: ${detail.date}\n` +
                    `è®­ç»ƒæ—¶é•¿: ${detail.duration}\n\n` +
                    `æ•°æ®é›†: ${detail.dataset}\n` +
                    `è®­ç»ƒè½®æ¬¡: ${detail.epochs}\n` +
                    `æœ€ç»ˆæŸå¤±: ${detail.loss}\n` +
                    `æ¨¡å‹å‚æ•°: ${detail.parameters}\n\n` +
                    `ç‚¹å‡»ç¡®å®šæŸ¥çœ‹è®­ç»ƒæ›²çº¿å›¾...`);
            }
        }

        function viewAllTrainingHistory() {
            alert('å…¨éƒ¨è®­ç»ƒå†å²\n\n' +
                'è·³è½¬åˆ°è®­ç»ƒå†å²é¡µé¢ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹ï¼š\n' +
                'â€¢ æ‰€æœ‰å†å²è®­ç»ƒè®°å½•\n' +
                'â€¢ è®­ç»ƒæ€§èƒ½è¶‹åŠ¿å›¾\n' +
                'â€¢ æ¨¡å‹å¯¹æ¯”åˆ†æ\n' +
                'â€¢ å¯¼å‡ºè®­ç»ƒæŠ¥å‘Š\n' +
                'â€¢ è®­ç»ƒæ—¥å¿—ä¸‹è½½\n\n' +
                'å³å°†è·³è½¬åˆ°è¯¦ç»†é¡µé¢...');
            
            // å®é™…é¡¹ç›®ä¸­å¯ä»¥è·³è½¬åˆ°è®­ç»ƒå†å²é¡µé¢
            // window.location.href = './training-history.html';
        }

        // é¡µé¢åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            const user = JSON.parse(localStorage.getItem('user') || '{}');
            const userInfo = document.getElementById('userInfo');
            if (user.name) {
                userInfo.textContent = `${user.name}`;
            }
        });
    </script>
</body>
</html>