<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆ›å»ºæ–°é¡¹ç›® - EdgeAI</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../../shared/css/unified-styles.css">
    <link rel="stylesheet" href="../../shared/css/theme-system-unified.css">
    <link rel="stylesheet" href="../../shared/css/animations.css">
    <style>
        /* æ·±è‰²æ¨¡å¼æ ·å¼ */
        [data-theme="dark"] {
            background-color: #1f2937;
            color: #f9fafb;
        }
        
        [data-theme="dark"] .bg-gray-50 {
            background-color: #111827 !important;
        }
        
        [data-theme="dark"] .bg-white {
            background-color: #1f2937 !important;
            border-color: #374151;
        }
        
        [data-theme="dark"] .text-gray-900 {
            color: #f9fafb !important;
        }
        
        [data-theme="dark"] .text-gray-600 {
            color: #d1d5db !important;
        }
        
        [data-theme="dark"] .text-gray-700 {
            color: #e5e7eb !important;
        }
        
        [data-theme="dark"] .text-gray-500 {
            color: #9ca3af !important;
        }
        
        [data-theme="dark"] .border-gray-200 {
            border-color: #374151 !important;
        }
        
        [data-theme="dark"] .border-gray-300 {
            border-color: #4b5563 !important;
        }
        
        [data-theme="dark"] input,
        [data-theme="dark"] textarea,
        [data-theme="dark"] select {
            background-color: #374151 !important;
            border-color: #4b5563 !important;
            color: #f9fafb !important;
        }
        
        [data-theme="dark"] input::placeholder,
        [data-theme="dark"] textarea::placeholder {
            color: #9ca3af !important;
        }
        
        [data-theme="dark"] input:focus,
        [data-theme="dark"] textarea:focus,
        [data-theme="dark"] select:focus {
            background-color: #4b5563 !important;
            border-color: #3b82f6 !important;
        }
        
        [data-theme="dark"] .shadow-lg {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.15) !important;
        }
        
        [data-theme="dark"] button:not(.theme-toggle):not(.language-toggle) {
            background-color: #374151 !important;
            border-color: #4b5563 !important;
            color: #f9fafb !important;
        }
        
        [data-theme="dark"] button:not(.theme-toggle):not(.language-toggle):hover {
            background-color: #4b5563 !important;
        }
        
        [data-theme="dark"] .bg-blue-500 {
            background-color: #3b82f6 !important;
        }
        
        [data-theme="dark"] .bg-blue-500:hover {
            background-color: #2563eb !important;
        }
        
        [data-theme="dark"] .bg-gray-200 {
            background-color: #374151 !important;
        }
        
        [data-theme="dark"] .bg-gray-200:hover {
            background-color: #4b5563 !important;
        }
        
        [data-theme="dark"] .bg-red-500 {
            background-color: #dc2626 !important;
        }
        
        [data-theme="dark"] .bg-red-500:hover {
            background-color: #b91c1c !important;
        }
    </style>
</head>
<body class="theme-transition">
    <div class="min-h-screen bg-gray-50" data-theme="light">
        <!-- é¡¶éƒ¨å¯¼èˆª -->
        <nav class="bg-white border-b border-gray-200 sticky top-0 z-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16">
                    <div class="flex items-center">
                        <button onclick="goBack()" class="mr-4 text-gray-600 hover:text-gray-900 transition-colors">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                            </svg>
                        </button>
                        <h1 class="text-xl font-semibold text-gray-900" data-i18n="edgeai.createProject.title">åˆ›å»ºæ–°é¡¹ç›®</h1>
                    </div>
                    <div class="flex items-center space-x-4">
                        <!-- ä¸»é¢˜åˆ‡æ¢ -->
                        <button class="theme-toggle" title="åˆ‡æ¢ä¸»é¢˜">
                            <span>ğŸŒ™</span>
                        </button>
                        <!-- è¯­è¨€åˆ‡æ¢ -->
                        <button class="language-toggle" title="åˆ‡æ¢è¯­è¨€">EN</button>
                    </div>
                </div>
            </div>
        </nav>

        <!-- ä¸»è¦å†…å®¹ -->
        <div class="max-w-4xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
            <!-- é¡¹ç›®åˆ›å»ºè¡¨å• -->
            <div class="bg-white rounded-lg shadow-lg p-8 fade-in-up">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold text-gray-900 mb-2" data-i18n="edgeai.createProject.projectConfig">EdgeAI é¡¹ç›®é…ç½®</h2>
                    <p class="text-gray-600" data-i18n="edgeai.createProject.description">åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†å¸ƒå¼è¾¹ç¼˜AIè®­ç»ƒé¡¹ç›®</p>
                </div>

                <form id="projectForm" class="space-y-8">
                    <!-- åŸºç¡€ä¿¡æ¯ -->
                    <div class="space-y-6">
                        <h3 class="text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2">åŸºç¡€ä¿¡æ¯</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="projectName" class="block text-sm font-medium text-gray-700 mb-2">é¡¹ç›®åç§° *</label>
                                <input type="text" id="projectName" name="projectName" required
                                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                       placeholder="ä¾‹å¦‚ï¼šå›¾åƒè¯†åˆ«è®­ç»ƒé¡¹ç›®">
                            </div>
                            <div>
                                <label for="projectOwner" class="block text-sm font-medium text-gray-700 mb-2">é¡¹ç›®è´Ÿè´£äºº *</label>
                                <input type="text" id="projectOwner" name="projectOwner" required
                                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                       placeholder="è¾“å…¥è´Ÿè´£äººå§“å">
                            </div>
                        </div>

                        <div>
                            <label for="projectDescription" class="block text-sm font-medium text-gray-700 mb-2">é¡¹ç›®æè¿°</label>
                            <textarea id="projectDescription" name="projectDescription" rows="3"
                                      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                      placeholder="æè¿°é¡¹ç›®çš„ç›®æ ‡ã€ç”¨é€”å’Œé¢„æœŸç»“æœ..."></textarea>
                        </div>
                    </div>

                    <!-- AIæ¨¡å‹é…ç½® -->
                    <div class="space-y-6">
                        <h3 class="text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2">AIæ¨¡å‹é…ç½®</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="modelType" class="block text-sm font-medium text-gray-700 mb-2">æ¨¡å‹ç±»å‹ *</label>
                                <select id="modelType" name="modelType" required
                                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">é€‰æ‹©æ¨¡å‹ç±»å‹...</option>
                                    <option value="cnn">CNN (å·ç§¯ç¥ç»ç½‘ç»œ)</option>
                                    <option value="rnn">RNN (å¾ªç¯ç¥ç»ç½‘ç»œ)</option>
                                    <option value="transformer">Transformer</option>
                                    <option value="resnet">ResNet (æ®‹å·®ç½‘ç»œ)</option>
                                    <option value="yolo">YOLO (ç›®æ ‡æ£€æµ‹)</option>
                                    <option value="bert">BERT (è‡ªç„¶è¯­è¨€å¤„ç†)</option>
                                </select>
                            </div>
                            <div>
                                <label for="trainingStrategy" class="block text-sm font-medium text-gray-700 mb-2">è®­ç»ƒç­–ç•¥ *</label>
                                <select id="trainingStrategy" name="trainingStrategy" required
                                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">é€‰æ‹©è®­ç»ƒç­–ç•¥...</option>
                                    <option value="federated">è”é‚¦å­¦ä¹ </option>
                                    <option value="reinforcement">å¼ºåŒ–å­¦ä¹ </option>
                                    <option value="transfer">è¿ç§»å­¦ä¹ </option>
                                    <option value="ensemble">é›†æˆå­¦ä¹ </option>
                                    <option value="distributed">åˆ†å¸ƒå¼è®­ç»ƒ</option>
                                </select>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label for="targetAccuracy" class="block text-sm font-medium text-gray-700 mb-2">ç›®æ ‡å‡†ç¡®ç‡ (%)</label>
                                <input type="number" id="targetAccuracy" name="targetAccuracy" min="1" max="100" value="90"
                                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label for="maxEpochs" class="block text-sm font-medium text-gray-700 mb-2">æœ€å¤§è®­ç»ƒè½®æ•°</label>
                                <input type="number" id="maxEpochs" name="maxEpochs" min="1" value="100"
                                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label for="learningRate" class="block text-sm font-medium text-gray-700 mb-2">å­¦ä¹ ç‡</label>
                                <input type="number" id="learningRate" name="learningRate" min="0.0001" max="1" step="0.0001" value="0.001"
                                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                        </div>
                    </div>

                    <!-- èŠ‚ç‚¹é…ç½® -->
                    <div class="space-y-6">
                        <h3 class="text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2">èŠ‚ç‚¹é…ç½®</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label for="maxNodes" class="block text-sm font-medium text-gray-700 mb-2">æœ€å¤§èŠ‚ç‚¹æ•°</label>
                                <input type="number" id="maxNodes" name="maxNodes" min="1" max="100" value="50"
                                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label for="minNodes" class="block text-sm font-medium text-gray-700 mb-2">æœ€å°‘èŠ‚ç‚¹æ•°</label>
                                <input type="number" id="minNodes" name="minNodes" min="1" value="3"
                                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label for="nodeTimeout" class="block text-sm font-medium text-gray-700 mb-2">èŠ‚ç‚¹è¶…æ—¶ (ç§’)</label>
                                <input type="number" id="nodeTimeout" name="nodeTimeout" min="10" value="300"
                                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                        </div>
                    </div>

                    <!-- å®‰å…¨è®¾ç½® -->
                    <div class="space-y-6">
                        <h3 class="text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2">å®‰å…¨è®¾ç½®</h3>
                        
                        <div class="space-y-4">
                            <label class="flex items-center">
                                <input type="checkbox" id="enableEncryption" name="enableEncryption" checked
                                       class="mr-3 rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                <span class="text-sm text-gray-700">å¯ç”¨ç«¯åˆ°ç«¯åŠ å¯†</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="requireAuth" name="requireAuth" checked
                                       class="mr-3 rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                <span class="text-sm text-gray-700">è¦æ±‚èŠ‚ç‚¹èº«ä»½éªŒè¯</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="enableAuditLog" name="enableAuditLog" checked
                                       class="mr-3 rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                <span class="text-sm text-gray-700">å¯ç”¨å®¡è®¡æ—¥å¿—</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="enableMonitoring" name="enableMonitoring" checked
                                       class="mr-3 rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                <span class="text-sm text-gray-700">å¯ç”¨å®æ—¶ç›‘æ§</span>
                            </label>
                        </div>
                    </div>

                    <!-- æäº¤æŒ‰é’® -->
                    <div class="flex justify-end space-x-4 pt-6 border-t border-gray-200">
                        <button type="button" onclick="goBack()" 
                                class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors">
                            å–æ¶ˆ
                        </button>
                        <button type="button" onclick="saveAsDraft()"
                                class="px-6 py-2 border border-blue-300 text-blue-600 rounded-lg hover:bg-blue-50 transition-colors">
                            ä¿å­˜è‰ç¨¿
                        </button>
                        <button type="submit"
                                class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                            åˆ›å»ºé¡¹ç›®
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="../../shared/js/navigation-unified.js"></script>
    <script src="../../shared/js/theme-manager-unified.js"></script>
    <script src="../../shared/js/i18n-manager.js"></script>
    <script>
        // è¡¨å•æäº¤å¤„ç†
        document.getElementById('projectForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const projectData = Object.fromEntries(formData);
            
            // æ·»åŠ å¤é€‰æ¡†æ•°æ®
            projectData.enableEncryption = document.getElementById('enableEncryption').checked;
            projectData.requireAuth = document.getElementById('requireAuth').checked;
            projectData.enableAuditLog = document.getElementById('enableAuditLog').checked;
            projectData.enableMonitoring = document.getElementById('enableMonitoring').checked;
            
            console.log('é¡¹ç›®æ•°æ®:', projectData);
            
            // æ¨¡æ‹Ÿé¡¹ç›®åˆ›å»º
            alert('æ­£åœ¨åˆ›å»ºé¡¹ç›®ï¼Œè¯·ç¨å€™...');
            
            setTimeout(() => {
                alert(`é¡¹ç›® "${projectData.projectName}" åˆ›å»ºæˆåŠŸï¼\n\né¡¹ç›®é…ç½®ï¼š\n- æ¨¡å‹ç±»å‹: ${getModelTypeName(projectData.modelType)}\n- è®­ç»ƒç­–ç•¥: ${getStrategyName(projectData.trainingStrategy)}\n- ç›®æ ‡å‡†ç¡®ç‡: ${projectData.targetAccuracy}%\n- æœ€å¤§èŠ‚ç‚¹æ•°: ${projectData.maxNodes}`);
                
                // åˆ›å»ºæˆåŠŸåè·³è½¬åˆ°é¡¹ç›®ç®¡ç†é¡µé¢
                window.location.href = './dashboard.html';
            }, 2000);
        });

        // ä¿å­˜è‰ç¨¿
        function saveAsDraft() {
            const formData = new FormData(document.getElementById('projectForm'));
            const projectData = Object.fromEntries(formData);
            
            localStorage.setItem('edgeai_project_draft', JSON.stringify(projectData));
            alert('é¡¹ç›®è‰ç¨¿å·²ä¿å­˜ï¼');
        }

        // ä½¿ç”¨ç»Ÿä¸€å¯¼èˆªç³»ç»Ÿçš„goBackå‡½æ•°ï¼ˆå·²é€šè¿‡navigation-unified.jsæä¾›ï¼‰

        // è·å–æ¨¡å‹ç±»å‹åç§°
        function getModelTypeName(value) {
            const names = {
                'cnn': 'CNN (å·ç§¯ç¥ç»ç½‘ç»œ)',
                'rnn': 'RNN (å¾ªç¯ç¥ç»ç½‘ç»œ)',
                'transformer': 'Transformer',
                'resnet': 'ResNet (æ®‹å·®ç½‘ç»œ)',
                'yolo': 'YOLO (ç›®æ ‡æ£€æµ‹)',
                'bert': 'BERT (è‡ªç„¶è¯­è¨€å¤„ç†)'
            };
            return names[value] || value;
        }

        // è·å–ç­–ç•¥åç§°
        function getStrategyName(value) {
            const names = {
                'federated': 'è”é‚¦å­¦ä¹ ',
                'reinforcement': 'å¼ºåŒ–å­¦ä¹ ',
                'transfer': 'è¿ç§»å­¦ä¹ ',
                'ensemble': 'é›†æˆå­¦ä¹ ',
                'distributed': 'åˆ†å¸ƒå¼è®­ç»ƒ'
            };
            return names[value] || value;
        }

        // é¡µé¢åŠ è½½å®Œæˆåæ£€æŸ¥æ˜¯å¦æœ‰è‰ç¨¿å’Œåˆå§‹åŒ–åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            // ç­‰å¾…ä¸€ç‚¹æ—¶é—´ç¡®ä¿æ‰€æœ‰è„šæœ¬åŠ è½½å®Œæˆï¼Œç„¶ååº”ç”¨ç¿»è¯‘
            setTimeout(() => {
                if (window.i18nManager) {
                    window.i18nManager.applyTranslations();
                }
            }, 100);
            const draft = localStorage.getItem('edgeai_project_draft');
            if (draft) {
                const projectData = JSON.parse(draft);
                
                // è¯¢é—®æ˜¯å¦æ¢å¤è‰ç¨¿
                if (confirm('æ£€æµ‹åˆ°æœªå®Œæˆçš„é¡¹ç›®è‰ç¨¿ï¼Œæ˜¯å¦è¦æ¢å¤ï¼Ÿ')) {
                    // å¡«å……è¡¨å•æ•°æ®
                    Object.keys(projectData).forEach(key => {
                        const element = document.getElementById(key);
                        if (element) {
                            if (element.type === 'checkbox') {
                                element.checked = projectData[key] === 'on';
                            } else {
                                element.value = projectData[key];
                            }
                        }
                    });
                } else {
                    localStorage.removeItem('edgeai_project_draft');
                }
            }
        });
    </script>
</body>
</html>